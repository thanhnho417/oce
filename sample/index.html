<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
</head>
<body>
    <div class="container">
        <div class="main">
            <div class="vid-play">
                <video playsinline controls id="player">
                    <source src="https://raw.githubusercontent.com/thanhnho417/oce/refs/heads/main/Video/kusuriya/s2-trailer-2/index.m3u8" type="application/x-mpegURL">
                </video>
            </div>
            <div class="conts">
                <p id="title">Video Thử Nghiệm</p>
                <p id="description">Thông tin Lorem ipsum, udiandae molestiae quibusdam alias dolorum. Commodi hic asperiores rem, aspernatur dolores odio corrupti optio ea unde id animi officiis? Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aliquam explicabo, harum repudiandae molestias dolore, numquam quos expedita minima sed architecto non, esse blanditiis laudantium praesentium possimus? Quasi veniam dolorum ab. Lorem ipsum dolor sit, amet consectetur adipisicing elit. Distinctio, eius? Velit nesciunt, nobis aperiam iste aspernatur quia beatae corrupti autem obcaecati labore similique culpa atque, dignissimos distinctio totam, mollitia tenetur.</p>
                <button id="toggle-btn">Hiện thêm</button>
            </div>
        </div>
        <div class="playlist">
            <div class="playlist-title">
                Playlist
            </div>
            <hr>
            <div class="playlist-video" data-src="https://raw.githubusercontent.com/thanhnho417/oce/refs/heads/main/Video/kusuriya/s2-trailer-2/index.m3u8">
                <img src="https://raw.githubusercontent.com/thanhnho417/oce/refs/heads/main/pages/media/video/tb1.png" alt="Thumbnail">
                <p>Tiêu đề Thumbnail</p>
            </div>
        </div>
    </div>
    <script src="../javascript/m3u8.js" async></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.0"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <script>
        const player = new Plyr('#player')
        function adjustPlaylistHeight() {
            const main = document.querySelector('.main');
            const playlist = document.querySelector('.playlist');

            if (main && playlist) {
            const mainHeight = main.offsetHeight;
            playlist.style.height = mainHeight + 'px';
            }
        }

        const description = document.getElementById('description');
        const toggleBtn = document.getElementById('toggle-btn');

        if (description && toggleBtn) {
            toggleBtn.addEventListener('click', () => {
                // Kiểm tra trạng thái hiện tại của phần tử và thay đổi hiển thị
                if (description.style.display === 'block') {
                    description.style.display = '-webkit-box'; // Thu gọn lại
                    toggleBtn.textContent = 'Hiện thêm';
                } else {
                    description.style.display = 'block'; // Hiển thị toàn bộ nội dung
                    toggleBtn.textContent = 'Ẩn bớt';
                }
            });
        }
        const playlistVideos = document.querySelectorAll('.playlist-video');
        playlistVideos.forEach(item => {
            item.addEventListener('click', () => {
                const vidsrc = item.getAttribute('data-src');
                const playsource = document.querySelector('#player source');
                if (vidsrc && playsource) {
                    playsource.src = vidsrc;
                    player.media.load();
                }
            });
        });
        window.addEventListener('load', adjustPlaylistHeight);
        window.addEventListener('resize', adjustPlaylistHeight);
    </script>
</body>
</html>